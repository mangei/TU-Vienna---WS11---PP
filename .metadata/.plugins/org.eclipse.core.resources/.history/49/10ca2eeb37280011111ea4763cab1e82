import java.util.Scanner;

/**
 * Diese Factory erzeugt BinaryOperations.
 * 
 * @version 8
 * @author Manuel Geier (1126137)
 * 
 */
public class BinaryFactory implements Factory {

	/**
	 * erzeugt eine neue BinaryFactory.
	 */
	public BinaryFactory() {
	}

	/**
	 * liest mit dem Scanner das Schwellwert Zeichen ein, erzeugt damit eine neue 
	 * BinaryOperation und gibt diese zurück. Tritt beim Einlesen des Zeichens ein 
	 * Fehler auf, so wird eine FactoryException geworfen.
	 * 
	 * @param scanner
	 *            The Scanner to use for reading parameters
	 * @return A new LoadOperation
	 * @throws FactoryException
	 *             Thrown if there are too few parameters or parameters with a wrong type
	 */
	public Operation create(Scanner scanner) throws FactoryException {

		String loadImage = "";
		
		if(scanner.hasNext()) {
			
			String endStr = scanner.next();
			
			boolean eof = false;
			while(!eof) {
				if(scanner.hasNext()) {
					
					String line = scanner.next();
					
					// Check if it is the end string
					if(line.equals(endStr)) {
						eof = true;
						
					} else {
						// add the line
						loadImage += line + '\n';
							
					}
				} else {
					eof = true;
				}
			}
		} else {
			throw new FactoryException("too few parameters");
		}
		
		return new LoadOperation(loadImage);
	}
}
